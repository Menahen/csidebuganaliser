<!DOCTYPE html>
<html>
<head>
     <script>window.GO = window.go = require('./js/go.js');</script>
</head>
<body style="width:100%">
<div id="myDiagramDiv"
     style="width:100%; height:500px; background-color: #DAE4E4;"></div>

	<script type="text/javascript">
var GO = go.GraphObject.make;  // for conciseness in defining templates

    myDiagram =
      GO(go.Diagram, "myDiagramDiv",  // must name or refer to the DIV HTML element
        {
          initialAutoScale: go.Diagram.Uniform,  // an initial automatic zoom-to-fit
          contentAlignment: go.Spot.Center,  // align document to the center of the viewport
          layout:
            GO(go.TreeLayout, // specify a Diagram.layout that arranges trees
                { angle: 90, layerSpacing: 35 })
        });

    // define each Node's appearance
    myDiagram.nodeTemplate =
      GO(go.Node, "Auto",  // the whole node panel
        { locationSpot: go.Spot.Center },
        // define the node's outer shape, which will surround the TextBlock
        GO(go.Shape, "Rectangle",
          { fill: GO(go.Brush, "Linear", { 0: "rgb(254, 201, 0)", 1: "rgb(254, 162, 0)" }), stroke: "black" }),
        GO(go.TextBlock,
          { font: "bold 10pt helvetica, bold arial, sans-serif", margin: 4 },
          new go.Binding("text", "text"))
      );

    // replace the default Link template in the linkTemplateMap
    myDiagram.linkTemplate =
      GO(go.Link,  // the whole link panel
        GO(go.Shape,  // the link shape
          { stroke: "black" }),
        GO(go.Shape,  // the arrowhead
          { toArrow: "standard", stroke: null }),
        GO(go.Panel, "Auto",
          GO(go.Shape,  // the label background, which becomes transparent around the edges
            { fill: GO(go.Brush, "Radial", { 0: "rgb(240, 240, 240)", 0.3: "rgb(240, 240, 240)", 1: "rgba(240, 240, 240, 0)" }),
              stroke: null }),
          GO(go.TextBlock,  // the label text
            { textAlign: "center",
              font: "10pt helvetica, arial, sans-serif",
              stroke: "#555555",
              margin: 4 },
            new go.Binding("text", "text"))
        )
      );


var model = GO(go.TreeModel);
/*model.nodeDataArray =
[
  { key: "1",              name: "Don Meow",   source: "cat1.png" },
  { key: "2", parent: "1", name: "Demeter",    source: "cat2.png" },
  { key: "3", parent: "1", name: "Copricat",   source: "cat3.png" },
  { key: "4", parent: "3", name: "Jellylorum", source: "cat4.png" },
  { key: "5", parent: "3", name: "Alonzo",     source: "cat5.png" },
  { key: "6", parent: "2", name: "Munkustrap", source: "cat6.png" }
];*/
model.nodeDataArray = global.mics;
model.linkDataArray = global.links;
myDiagram.model = model;	
myDiagram.model = new go.GraphLinksModel(global.mics, global.links);
	</script>

</body>
</html>